<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>OnlyHaswer Radio â€” Player Pro</title>
<style>
  :root{
    --bg:#060606; --card:#0e0e0e; --accent:#00ff66; --muted:#9aa79a; --text:#e6ffe9;
    --online:#00ff66; --offline:#ff3f3f;
  }
  [data-theme="light"]{ 
    --bg:#f6f7f8; --card:#ffffff; --accent:#008f3a; --muted:#556; --text:#111; 
    --online:#008f3a; --offline:#cc0000;
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--text);font-family:Inter,Arial,Helvetica,sans-serif;display:flex;justify-content:center;padding:28px;}
  .wrap{width:100%;max-width:1100px;}
  header.appHeader{display:flex;align-items:center;gap:14px;margin-bottom:18px;}
  header.appHeader img{height:56px;border-radius:10px;box-shadow:0 6px 18px rgba(0,255,102,.06);}
  header.appHeader h1{font-size:20px;margin:0;color:var(--accent);font-weight:700;}
  .layout{display:grid;grid-template-columns:1fr 320px;gap:20px;}
  @media (max-width:980px){ .layout{grid-template-columns:1fr;} header.appHeader{justify-content:center;} }

  .playerCard{background:var(--card);padding:20px;border-radius:14px;box-shadow:0 10px 40px rgba(0,0,0,.6);border:1px solid rgba(0,255,102,.06);}
  .playerTop{display:flex;gap:14px;align-items:flex-start;flex-direction:column;}
  .logoSmall{width:92px;height:92px;border-radius:12px;object-fit:cover;box-shadow:0 8px 30px rgba(0,255,102,.05);}
  .metaBlock{flex:1;text-align:left;width:100%;}
  .stationTitle{color:var(--accent);font-weight:700;font-size:18px;margin-bottom:6px;}
  .infoLine{font-size:14px;color:var(--muted);line-height:1.4;margin-top:4px;}
  .infoLine span.statusOnline{color:var(--online); font-weight:700;}
  .infoLine span.statusOffline{color:var(--offline); font-weight:700;}
</style>
</head>
<body data-theme="dark">
<div class="wrap">
  <header class="appHeader">
    <img src="onlyhaswer2.png" alt="OnlyHaswer logo" />
    <h1>OnlyHaswer Radio â€” En vivo</h1>
  </header>

  <div class="layout">
    <div class="playerCard" id="mainPlayer">
      <div class="playerTop">
        <img class="logoSmall" src="dino.gif" alt="logo">

        <div class="metaBlock">
          <div class="stationTitle">OnlyHaswer Radio</div>

          <!-- ðŸ”¥ Reproductor iFrame -->
          <div style="margin-top:12px; width:100%;">
            <iframe 
              src="https://49.12.9.173/cp/widgets/player/single/?p=8060"
              height="110"
              width="100%"
              scrolling="no"
              style="border:none;border-radius:10px;overflow:hidden;"
            ></iframe>
          </div>

          <!-- InformaciÃ³n del stream debajo del reproductor -->
          <div style="margin-top:12px;">
            <div class="infoLine">Estado: <span id="streamStatus" class="statusOffline">Offline</span></div>
            <div class="infoLine">ðŸ‘¥ Oyentes: <span id="listeners">-</span></div>
            <div class="infoLine">âš¡ Bitrate: <span id="bitrate">-</span></div>
            <div class="infoLine">ðŸŽµ Formato: <span id="format">-</span></div>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>

<script>
// === METADATA & STATUS ===
async function fetchStatus() {
  const url = `https://sonic.nnw.cl/8060/status-json.xsl?nocache=${Date.now()}`;

  try {
    const res = await fetch(url, { cache: "no-store" });
    if (!res.ok) throw new Error("No se pudo obtener status");

    const data = await res.json();
    const source = data?.icestats?.source;

    const src = Array.isArray(source) ? source[0] : source;

    if (src) {
      document.getElementById("streamStatus").innerHTML = 'Online';
      document.getElementById("streamStatus").className = 'statusOnline';
      document.getElementById("listeners").innerText = src.listeners || "-";
      document.getElementById("bitrate").innerText = src.bitrate ? src.bitrate + " kbps" : "-";
      document.getElementById("format").innerText = src.server_type || "-";
    } else {
      document.getElementById("streamStatus").innerHTML = 'Offline';
      document.getElementById("streamStatus").className = 'statusOffline';
      document.getElementById("listeners").innerText = "-";
      document.getElementById("bitrate").innerText = "-";
      document.getElementById("format").innerText = "-";
    }

  } catch (err) {
    console.warn("Error al obtener status:", err);
    document.getElementById("streamStatus").innerHTML = 'Offline';
    document.getElementById("streamStatus").className = 'statusOffline';
    document.getElementById("listeners").innerText = "-";
    document.getElementById("bitrate").innerText = "-";
    document.getElementById("format").innerText = "-";
  }
}

// Actualiza cada 5 segundos
setInterval(fetchStatus, 5000);
fetchStatus();
</script>
</body>
</html>





