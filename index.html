<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>OnlyHaswer Radio â€” En Vivo</title>
<style>
/* ğŸ¨ COLORES Y TIPOGRAFÃA */
Â  :root{
Â  Â  --bg: #030303; /* Fondo muy oscuro */
Â  Â  --card: #0c0c0c; /* Contenedor sutilmente mÃ¡s claro */
Â  Â  --accent: #00ff66; /* Verde NeÃ³n */
Â  Â  --muted: #7f8a81; /* Gris oscuro para texto secundario */
Â  Â  --text: #e6ffe9; /* Texto principal */
Â  }
Â  *{box-sizing:border-box}
Â  body{
Â  Â  margin:0;
Â  Â  background:var(--bg);
Â  Â  color:var(--text);
Â  Â  font-family:Inter,Arial,Helvetica,sans-serif;
Â  Â  display:flex;
Â  Â  flex-direction: column;
Â  Â  min-height: 100vh;
Â  }
Â  
/* ğŸ–¼ï¸ ESTRUCTURA Y ENCABEZADO */
Â  header.appHeader{
Â  Â  display:flex;
Â  Â  align-items:center;
Â  Â  padding: 20px 40px;
Â  Â  gap:15px;
Â  Â  border-bottom: 1px solid rgba(0,255,102,.05);
Â  }
Â  header.appHeader img{
Â  Â  height:48px;
Â  Â  border-radius:8px;
Â  Â  box-shadow:0 0 10px rgba(0,255,102,.2);
Â  }
Â  header.appHeader h1{
Â  Â  font-size:18px;
Â  Â  margin:0;
Â  Â  color:var(--accent);
Â  Â  font-weight:700;
Â  }
Â  
/* ğŸ•¹ï¸ CONTENEDOR CENTRAL DEL REPRODUCTOR */
Â  .mainContent{
Â  Â  flex-grow: 1;
Â  Â  display: flex;
Â  Â  justify-content: center;
Â  Â  align-items: center;
Â  Â  padding: 40px 20px;
Â  }
Â  .playerCard{
Â  Â  background:var(--card);
Â  Â  padding:30px;
Â  Â  border-radius:20px;
Â  Â  width: 100%;
Â  Â  max-width:450px;
Â  Â  box-shadow:0 15px 50px rgba(0,0,0,.8), 0 0 0 1px rgba(0,255,102,.1);
Â  Â  text-align:center;
Â  }

Â  .logoLarge{
Â  Â  width:120px;
Â  Â  height:120px;
Â  Â  border-radius:16px;
Â  Â  object-fit:cover;
Â  Â  box-shadow:0 10px 40px rgba(0,255,102,.2);
Â  Â  margin-bottom: 25px;
Â  }

/* ğŸ¼ METADATA Y ESTADO */
Â  .statusBlock{
Â  Â  margin-bottom: 25px;
Â  }
Â  .stationTitle{
Â  Â  color:var(--accent);
Â  Â  font-weight:700;
Â  Â  font-size:24px;
Â  Â  margin:0 0 5px 0;
Â  }
Â  .metaSong{
Â  Â  font-size: 16px;
Â  Â  color: var(--text);
Â  Â  font-weight: 600;
Â  Â  margin-bottom: 8px;
Â  }
Â  .stationStatus{
Â  Â  font-size:14px;
Â  Â  color:var(--muted);
Â  }

/* â–¶ï¸ BOTÃ“N DE REPRODUCCIÃ“N */
Â  .playBtn{
Â  Â  width:90px;
Â  Â  height:90px;
Â  Â  border-radius:50%;
Â  Â  border:none;
Â  Â  background:linear-gradient(180deg,#00ff66,#00dd55);
Â  Â  color:#000;
Â  Â  font-size:30px;
Â  Â  box-shadow:0 8px 30px rgba(0,255,102,.3), inset 0 -6px 20px rgba(0,0,0,.15);
Â  Â  cursor:pointer;
Â  Â  transition: transform 0.2s;
Â  }
Â  .playBtn:active{
Â  Â  transform: scale(0.95);
Â  }
Â  
/* ğŸšï¸ CONTROLES Y LINKS */
Â  .controlsRow{
Â  Â  display:flex;
Â  Â  gap:15px;
Â  Â  align-items:center;
Â  Â  margin-top:25px;
Â  Â  flex-wrap:wrap;
Â  Â  justify-content: center;
Â  }
Â  .controlSmall{
Â  Â  background:transparent;
Â  Â  border:1px solid rgba(0,255,102,.2);
Â  Â  color:var(--accent);
Â  Â  padding:10px 14px;
Â  Â  border-radius:10px;
Â  Â  cursor:pointer;
Â  Â  font-size:14px;
Â  Â  text-decoration: none;
Â  }
Â  .controlSmall:hover{
Â  Â  background: rgba(0,255,102,.05);
Â  }
Â  .volume{width:150px;}

/* ğŸ“¢ Visualizador (Oculto en este diseÃ±o simple) */
Â  .visualizer{ display: none; } 
Â  .listeners{
Â  Â  font-size:13px;
Â  Â  color:var(--muted);
Â  Â  margin-top: 20px;
Â  Â  display:flex;
Â  Â  gap:10px;
Â  Â  align-items:center;
Â  Â  justify-content: center;
Â  }
Â  .listenerDot{
Â  Â  width:9px;
Â  Â  height:9px;
Â  Â  background:var(--accent);
Â  Â  border-radius:50%;
Â  Â  box-shadow:0 0 8px rgba(0,255,102,.4);
Â  }
Â  
/* ğŸ“± Responsive */
Â  @media (max-width:500px){
Â  Â  header.appHeader{ padding: 15px 20px; justify-content: center; }
Â  Â  header.appHeader h1{ display: none; } /* Ocultar el tÃ­tulo en mÃ³viles */
Â  Â  .playerCard{ padding: 25px 15px; }
Â  Â  .stationTitle{ font-size: 20px; }
Â  Â  .controlsRow{ flex-direction: column; gap: 10px; }
Â  Â  .volume{ width: 100%; }
Â  }
</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.3/howler.min.js"></script>
</head>
<body>
Â  
Â  Â  <header class="appHeader">
Â  Â  <img src="onlyhaswer2.png" alt="OnlyHaswer logo" />
Â  Â  <h1>OnlyHaswer Radio â€” En Vivo</h1>
Â  </header>

Â  Â  <div class="mainContent">
Â  Â  <div class="playerCard" id="mainPlayer">
Â  Â  Â  
Â  Â  Â  <img class="logoLarge" src="onlyhaswer2.png" alt="logo grande">
Â  Â  Â  
Â  Â  Â  <div class="statusBlock">
Â  Â  Â  Â  <div class="stationTitle">OnlyHaswer Radio</div>
Â  Â  Â  Â  <div class="metaSong" id="metaSong">Now Playing: Cargando metadatos...</div>
Â  Â  Â  Â  <div class="stationStatus" id="stationStatus">Presiona Play</div>
Â  Â  Â  </div>
Â  Â  Â  
Â  Â  Â  <button id="playBtn" class="playBtn" aria-label="Play">â–¶</button>
Â  Â  Â  
Â  Â  Â  Â  Â  Â  <div class="controlsRow">
Â  Â  Â  Â  <button id="muteBtn" class="controlSmall" title="Silenciar">ğŸ”ˆ Silenciar</button>
Â  Â  Â  Â  <input id="volRange" class="volume" type="range" min="0" max="1" step="0.01" value="0.9">
Â  Â  Â  </div>

Â  Â  Â  <div class="controlsRow" style="margin-top: 15px;">
Â  Â  Â  Â  Â  Â  Â  Â  <a id="externalOpen" class="controlSmall" href="https://uk26freenew.listen2myradio.com/live.mp3?typeportmount=ice_5838_stream_53056691" target="_blank" rel="noopener noreferrer">
Â  Â  Â  Â  Â  ğŸ“» Winamp / VLC
Â  Â  Â  Â  </a>
Â  Â  Â  Â  Â  Â  Â  Â  <button id="copyStream" class="controlSmall">ğŸ”— Copiar Stream</button>
Â  Â  Â  </div>

Â  Â  Â  <div class="listeners" id="listenersLine">
Â  Â  Â  Â  <div class="listenerDot"></div>
Â  Â  Â  Â  <div id="listenersCount">Oyentes: â€”</div>
Â  Â  Â  </div>

Â  Â  </div>
Â  </div>
Â  

<script>
/* âš™ï¸ CONFIGURACIÃ“N */
const STREAM_URL = "https://uk26freenew.listen2myradio.com/live.mp3?typeportmount=ice_5838_stream_53056691";
const METADATA_URL = "http://onlyhaswerradio.ddns.net:8000/status-json.xsl"; // Icecast status (HTTP)
const POLL_INTERVAL = 7000; // 7 segundos

/* ğŸ¯ ELEMENTOS */
const playBtn = document.getElementById('playBtn');
const stationStatus = document.getElementById('stationStatus');
const listenersCount = document.getElementById('listenersCount');
const volRange = document.getElementById('volRange');
const muteBtn = document.getElementById('muteBtn');
const metaSong = document.getElementById('metaSong');
const copyBtn = document.getElementById('copyStream');

let isPlaying = false; 

/* ğŸ¶ INICIALIZACIÃ“N DEL REPRODUCTOR HOWLER.JS */
const sound = new Howl({
Â  src: [STREAM_URL], 
Â  html5: true, 
Â  volume: parseFloat(volRange.value),
Â  preload: false,
  format: ['mp3'], 
Â  onplay: () => {
    isPlaying = true;
    playBtn.textContent = "â¸";
    stationStatus.textContent = "Reproduciendo";
  },
Â  onpause: () => {
    isPlaying = false;
    playBtn.textContent = "â–¶";
    stationStatus.textContent = "Pausado";
  },
Â  onloaderror: (id, error) => {
    console.error("Howler Load Error:", error);
    stationStatus.textContent = "Error: El stream no carga. (Verificar link)";
  },
});


/* â–¶ï¸ PLAY / PAUSE */
playBtn.addEventListener('click', () => {
Â  try {
Â  Â  if (sound.playing()) {
Â  Â  Â  sound.pause();
Â  Â  } else {
      if(sound.state() !== 'loaded') {
          sound.load();
          sound.once('load', () => sound.play());
      } else {
          sound.play();
      }
Â  Â  }
Â  } catch (err) {
Â  Â  console.warn("Play error:", err);
Â  Â  stationStatus.textContent = "Error al reproducir.";
Â  }
});

/* ğŸšï¸ VOLUMEN / MUTE */
volRange.addEventListener('input', (e)=> sound.volume(e.target.value));
muteBtn.addEventListener('click', ()=> {
Â  sound.mute(!sound.mute());
Â  muteBtn.textContent = sound.mute() ? "ğŸ”‡ Silenciado" : "ğŸ”ˆ Silenciar";
});

/* ğŸ”— COPIAR LINK DEL STREAM */
copyBtn.addEventListener('click', async ()=>{
Â  try {
Â  Â  await navigator.clipboard.writeText(STREAM_URL);
Â  Â  copyBtn.textContent = "Â¡Copiado! âœ“";
Â  Â  setTimeout(()=> copyBtn.textContent = "ğŸ”— Copiar Stream", 1600);
Â  } catch {
Â  Â  copyBtn.textContent = "Error al Copiar";
Â  Â  setTimeout(()=> copyBtn.textContent = "ğŸ”— Copiar Stream", 1600);
Â  }
});


/* ğŸ“° METADATA & LISTENERS */
async function fetchStatusJson(){
Â  try {
    // Usamos el endpoint HTTP para la metadata (si falla, es por HTTP/HTTPS)
Â  Â  const res = await fetch(METADATA_URL, {mode:'cors'});
Â  Â  if(!res.ok) throw new Error('no-ok');
Â  Â  const text = await res.text();
Â  Â  let json;
Â  Â  try { json = JSON.parse(text); } catch(e){
Â  Â  Â  const jMatch = text.match(/\{[\s\S]*\}/);
Â  Â  Â  if(jMatch) json = JSON.parse(jMatch[0]);
Â  Â  }
Â  Â  if(json && json.icestats){
Â  Â  Â  const src = json.icestats.source;
Â  Â  Â  let mount = src;
Â  Â  Â  if(Array.isArray(src)){ mount = src.find(s => (s.listenurl && s.listenurl.includes('/stream')) || s.listenurl) || src[0]; }
Â  Â  Â  const title = (mount && (mount.title || mount.song)) || null;
Â  Â  Â  const listeners = mount && (mount.listeners || mount.currentlisteners || mount.streams);
Â  Â  Â  
Â  Â  Â  // Actualizar elementos
Â  Â  Â  if(title) metaSong.textContent = "Now Playing: " + title;
Â  Â  Â  if(listeners !== undefined) listenersCount.textContent = "Oyentes: " + listeners;
Â  Â  Â  
Â  Â  Â  return true;
Â  Â  } else { throw new Error('no-json'); }
Â  } catch(err){ 
Â  Â  console.debug("fetchStatusJson failed:", err); 
Â  Â  return false; 
Â  }
}

async function tryFetchMetadata(){
Â  const ok = await fetchStatusJson();
Â  if(ok) return;
Â  
Â  // Fallback si el JSON falla (posiblemente por el conflicto HTTP/HTTPS)
Â  metaSong.textContent = "Now Playing: Metadata no disponible ğŸ˜”";
Â  listenersCount.textContent = "Oyentes: â€” (Error HTTP/HTTPS)";
}

tryFetchMetadata();
setInterval(tryFetchMetadata, POLL_INTERVAL);
</script>

</body>
</html>

